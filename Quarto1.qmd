---
title: "Analiza danych Airbnb"
format: html
editor: visual
---

## 1. Wczytanie pakietów

```{r}
library(dplyr)
library(ggplot2)
library(stringr)
library(tidyr)
library(readr)
library(tidyverse)
```

## 2. Wczytanie danych

```{r}
#polaczenie w jedno + head i dim
#colnames 
#nazwy plikow w kolumne, dodanie kolumny na weekdays i weekend, usuniecie .csv
#tibble 

# Ścieżka do folderu z danymi
folder <- "data"

# Lista plików .csv w folderze
plik_list <- list.files(path = folder, pattern = "\\.csv$", full.names = TRUE)

# Wczytanie danych z dodaniem kolumny z nazwą pliku
dane_list <- lapply(plik_list, function(file) {
  df <- read.csv(file)
  df$plik_zrodlowy <- basename(file)  # dodaje tylko nazwę pliku, bez ścieżki
  return(df)
})

# Połączenie wszystkiego w jeden data frame
dane_polaczone <- do.call(rbind, dane_list)

```

##b test
``` {r}
# Usunięcie rozszerzenia .csv
dane_polaczone$plik_zrodlowy <- sub("\\.csv$", "", dane_polaczone$plik_zrodlowy)

# Podział na dwie kolumny: miasto i typ
dane_polaczone[c("miasto", "typ")] <- do.call(rbind, strsplit(dane_polaczone$plik_zrodlowy, "_"))

# (opcjonalnie) Usunięcie starej kolumny z nazwą pliku
dane_polaczone$plik_zrodlowy <- NULL

```


##c test
``` {r}
dane_polaczone <- as_tibble(dane_polaczone)
head(dane_polaczone)
str(dane_polaczone)
```

```{r}
dane_polaczone <- dane_polaczone %>%
mutate(across(c(room_type, room_shared, room_private, miasto, host_is_superhost, typ), as.factor))
```

```{r}
#str(dane_polaczone)
```
```{r}
#

#table(dane_polaczone$miasto)

faktory <- select(dane_polaczone, room_type, room_shared, room_private,host_is_superhost, miasto, typ)
apply(faktory, 2, function(x) table(x))
```

## 3. Analiza i poprawa kolumn

```{r}
 #dodanie kolumny na weekdays i weekend, usuniecie .csv
#usuniecie id wiersza?
 # kolumna room- private, shared
#typy kolumn zmiana combined_data mutate na factor poza file name 
#miasta z duzej litery 
#inne kolumny

  
```

## 4. Analiza danych w kolumnach

```{r}
#summary
#hist()
#table()
#str()
#glimpse()
```

## 5. Analiza związków między kolumnami

## 6. Wnioski

## 7. Prezentacja wyników

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r}
1 + 1
```

You can add options to executable code like this

```{r}
#| echo: false
2 * 2
```

The `echo: false` option disables the printing of code (only output is displayed).
